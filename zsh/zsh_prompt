autoload -Uz vcs_info
zstyle ':vcs_info:*' enable git

precmd() {}

setopt prompt_subst

MODE_INDICATOR=''

function zle-line-init zle-keymap-select {
    MODE_INDICATOR="${${KEYMAP/vicmd/N}/(main|viins)/I}"
    zle reset-prompt
}

zle -N zle-line-init
zle -N zle-keymap-select

PROMPT='[${MODE_INDICATOR}] %# '
